cmake_minimum_required(VERSION 3.6)
project(gameboy_perfect_core C)

set(CMAKE_C_STANDARD 11)
set(SRC_DIR "${CMAKE_SOURCE_DIR}/src")

file(GLOB SOURCES
    "${SRC_DIR}/*.c"
    "${SRC_DIR}/*.h"
)

add_library(gameboy_perfect_core SHARED ${SOURCES})
target_include_directories(gameboy_perfect_core PRIVATE ${SRC_DIR})

# Set position independent code for shared object
set_target_properties(gameboy_perfect_core PROPERTIES POSITION_INDEPENDENT_CODE ON)
